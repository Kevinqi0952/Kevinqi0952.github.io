<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta http-equiv="pragma" content="no-cache" >
    <meta http-equiv="expires" content="0">
    <meta http-equiv="Cache-Control" content="no-cache">
    <link rel="stylesheet" type="text/css" href="../css/base/reset_mobile.css">
    <link rel="stylesheet" type="text/css" href="../css/base/bootstrap-4.0.0.css">
    <link rel="stylesheet" type="text/css" href="../css/bigshotlist.css"/>
    <title>大咖空间</title>
</head>
<body>
<div class="big-shot-list">
    <div class="list-header">
        <div class="header-details">
            <div class="header-portrait-box">
                <div class="portrait-img-box">
                    <img src="../image/tt-logo.png" alt="头像">
                </div>
                <span class="big-v-btn"></span>
            </div>
            <div class="header-info-box">
                <p class="info-name">清月的小窝</p>
                <p class="info-details">发布了88篇文章，获得了1578个喜欢</p>
            </div>
        </div>
        <div class="figure-info">
            <div class="info-box-left">
                <div class="fans-box">
                    <span class="fans-btn"></span>
                    <i>256粉丝</i>
                </div>
                <div class="article-num-box">
                    <span class="num-btn"></span>
                    <i>88篇文章</i>
                </div>
            </div>
            <div class="subscribe-box  follow-box" id="subscribe-btn"><span></span><i>关注</i></div>
        </div>
    </div>
    <div class="list-details">
        <ul>
            <li class="list-content">
                <div class="details-content">
                    <div class="content-img-box" style="background: url(../image/img01.jpg) no-repeat;background-size: cover;background-position: 50% 50%;"></div>
                    <div class="content-info-box">
                        <div class="info-title">新加坡 | 为你专属定制一份早中晚美食</div>
                        <div class="info-data">
                            <div class="data-left">
                                <i>UTAN</i>
                                <i>今天16:02</i>
                            </div>
                            <div class="data-right">
                                <span></span>
                                <i>2629</i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="function-box">
                    <ul>
                        <li class="top-box">
                            <span></span>
                            <p>置顶</p>
                        </li>
                        <li class="edit-box">
                            <span></span>
                            <p>编辑</p>
                        </li>
                        <li class="delete-box">
                            <span></span>
                            <p>删除</p>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="list-content">
                <div class="details-content">
                    <div class="content-img-box" style="background: url(../image/img03.jpg) no-repeat;background-size: cover;background-position: 50% 50%;"></div>
                    <div class="content-info-box">
                        <div class="info-title">新加坡 | 为你专属定制一份早中晚美食</div>
                        <div class="info-data">
                            <div class="data-left">
                                <i>UTAN</i>
                                <i>今天16:02</i>
                            </div>
                            <div class="data-right">
                                <span></span>
                                <i>2629</i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="function-box">
                    <ul>
                        <li class="top-box">
                            <span></span>
                            <p>置顶</p>
                        </li>
                        <li class="edit-box">
                            <span></span>
                            <p>编辑</p>
                        </li>
                        <li class="delete-box">
                            <span></span>
                            <p>删除</p>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="list-content">
                <div class="details-content">
                    <div class="content-img-box" style="background: url(../image/img02.jpg) no-repeat;background-size: cover;background-position: 50% 50%;"></div>
                    <div class="content-info-box">
                        <div class="info-title">新加坡 | 为你专属定制一份早中晚美食</div>
                        <div class="info-data">
                            <div class="data-left">
                                <i>UTAN</i>
                                <i>今天16:02</i>
                            </div>
                            <div class="data-right">
                                <span></span>
                                <i>2629</i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="function-box">
                    <ul>
                        <li class="top-box">
                            <span></span>
                            <p>置顶</p>
                        </li>
                        <li class="edit-box">
                            <span></span>
                            <p>编辑</p>
                        </li>
                        <li class="delete-box">
                            <span></span>
                            <p>删除</p>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="list-content">
                <div class="details-content">
                    <div class="content-img-box" style="background: url(../image/img01.jpg) no-repeat;background-size: cover;background-position: 50% 50%;"></div>
                    <div class="content-info-box">
                        <div class="info-title">新加坡 | 为你专属定制一份早中晚美食</div>
                        <div class="info-data">
                            <div class="data-left">
                                <i>UTAN</i>
                                <i>今天16:02</i>
                            </div>
                            <div class="data-right">
                                <span></span>
                                <i>2629</i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="function-box">
                    <ul>
                        <li class="top-box">
                            <span></span>
                            <p>置顶</p>
                        </li>
                        <li class="edit-box">
                            <span></span>
                            <p>编辑</p>
                        </li>
                        <li class="delete-box">
                            <span></span>
                            <p>删除</p>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="list-content">
                <div class="details-content">
                    <div class="content-img-box" style="background: url(../image/img03.jpg) no-repeat;background-size: cover;background-position: 50% 50%;"></div>
                    <div class="content-info-box">
                        <div class="info-title">新加坡 | 为你专属定制一份早中晚美食</div>
                        <div class="info-data">
                            <div class="data-left">
                                <i>UTAN</i>
                                <i>今天16:02</i>
                            </div>
                            <div class="data-right">
                                <span></span>
                                <i>2629</i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="function-box">
                    <ul>
                        <li class="top-box">
                            <span></span>
                            <p>置顶</p>
                        </li>
                        <li class="edit-box">
                            <span></span>
                            <p>编辑</p>
                        </li>
                        <li class="delete-box">
                            <span></span>
                            <p>删除</p>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
</div>
<script src="../js/common/jquery/1.11.1/jquery.js"></script>
<script>
    $(function()
    {
        function screenSizeSetting()
        {
            if($(window).width()<=640){
                $('html').css("font-size",$(window).width()*125/320+"%");
            }else{
                $('html').css("font-size",640*125/320+"%");
            }
        }
        $(function()
        {
            screenSizeSetting();
            $(window).resize(screenSizeSetting);
        });
    });
</script>
<script>
    $(document).ready(function(e) {
        // 获取所有行，对每一行设置监听
        var lines = $("li");
        var len = lines.length;
        var lastX, lastXForMobile;

        // 用于记录被按下的对象
        var pressedObj;  // 当前左滑的对象
        var lastLeftObj; // 上一个左滑的对象

        // 用于记录按下的点
        var start;

        // 网页在移动端运行时的监听
        for (var i = 0; i < len; ++i) {
            lines[i].addEventListener('touchstart', function(e){
                lastXForMobile = e.changedTouches[0].pageX;
                pressedObj = this; // 记录被按下的对象

                // 记录开始按下时的点
                var touches = event.touches[0];
                start = {
                    x: touches.pageX, // 横坐标
                    y: touches.pageY  // 纵坐标
                };
            });

            lines[i].addEventListener('touchmove',function(e){
                // 计算划动过程中x和y的变化量
                var touches = event.touches[0];
                delta = {
                    x: touches.pageX - start.x,
                    y: touches.pageY - start.y
                };

                // 横向位移大于纵向位移，阻止纵向滚动
                if (Math.abs(delta.x) > Math.abs(delta.y)) {
                    event.preventDefault();
                }
            });

            lines[i].addEventListener('touchend', function(e){
                var diffX = e.changedTouches[0].pageX - lastXForMobile;
                if (diffX < -150) {
                    $(pressedObj).animate({marginLeft:"-9.375rem"}, 500); // 左滑
                    lastLeftObj && lastLeftObj != pressedObj &&
                    $(lastLeftObj).animate({marginLeft:"0"}, 500); // 已经左滑状态的按钮右滑
                    lastLeftObj = pressedObj; // 记录上一个左滑的对象
                } else if (diffX > 150) {
                    $(pressedObj).animate({marginLeft:"0"}, 500); // 右滑
                    lastLeftObj = null; // 清空上一个左滑的对象
                }
            });
        }

        // 网页在PC浏览器中运行时的监听
        for (var i = 0; i < len; ++i) {
            $(lines[i]).bind('mousedown', function(e){
                lastX = e.clientX;
                pressedObj = this; // 记录被按下的对象
            });

            $(lines[i]).bind('mouseup', function(e){
                var diffX = e.clientX - lastX;
                if (diffX < -150) {
                    $(pressedObj).animate({marginLeft:"-9.375rem"}, 500); // 左滑
                    lastLeftObj && lastLeftObj != pressedObj &&
                    $(lastLeftObj).animate({marginLeft:"0"}, 500); // 已经左滑状态的按钮右滑
                    lastLeftObj = pressedObj; // 记录上一个左滑的对象
                } else if (diffX > 150) {
                    $(pressedObj).animate({marginLeft:"0"}, 500); // 右滑
                    lastLeftObj = null; // 清空上一个左滑的对象
                }
            });
        }

        $('#subscribe-btn').on('click',function(){
            if($(this).hasClass('follow-box')){
                $(this).find('i').text('已订阅');
                $(this).removeClass('follow-box');
                $(this).addClass('no-follow-box');
            }else{
                $(this).find('i').text('关注');
                $(this).removeClass('no-follow-box');
                $(this).addClass('follow-box');
            }
        })
    });
</script>
</body>
</html>