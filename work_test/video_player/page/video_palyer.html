<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta http-equiv="pragma" content="no-cache" >
    <meta http-equiv="expires" content="0">
    <meta http-equiv="Cache-Control" content="no-cache">
    <link rel="stylesheet" href="../css/reset_mobile.css"/>
    <link rel="stylesheet" href="../css/video_palyer.css"/>
    <title>video播放器</title>
</head>
<body>
<div class="video-content-main">
    <div class="content-main">
        <div class="player-btn"></div>
        <div class="player-info">
            <p>优谈FM第一期</p>
            <i>来自优谈TOP</i>
        </div>
        <div class="player-time">
            <p>3:49</p>
        </div>
    </div>
    <div class="progress-bar">
        <div class="bar-content"></div>
    </div>
    <audio id="audio">
        <source src="../video/hey!girl.mp3" type="audio/mpeg">
    </audio>
</div>
<script src="../js/jquery/jquery.js"></script>
<script>
    $(function()
    {
        function screenSizeSetting()
        {
            if($(window).width()<=640){
                $('html').css("font-size",$(window).width()*125/320+"%");
            }else{
                $('html').css("font-size",640*125/320+"%");
            }
        }
        $(function()
        {
            screenSizeSetting();
            $(window).resize(screenSizeSetting);
        });
    });
</script>
<script>
      $(function(){
          function getTime() {
              setTimeout(function () {
                  var duration = $("#audio")[0].duration;
                  if(isNaN(duration)){
                      getTime();
                  }
                  else{
                      var audioTime = ($("#audio")[0].duration)*1000;
                      $(".bar-content").animate({width:"100%"},audioTime);
                  }
              }, 10);
          }
          $('.video-content-main').click(function(){
              var audioEle = $("#audio")[0];

              if($('.player-btn').hasClass('pl-animation')){
                  $('.player-btn').removeClass('pl-animation');
                  audioEle.pause();
                  $(".bar-content").stop().animate();
              } else{
                  $('.player-btn').addClass('pl-animation');
                  audioEle.play();
                  getTime();
              }
          })
      })
</script>
</body>
</html>